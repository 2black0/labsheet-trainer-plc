## Implementasi PID Controller

Pada bagian ini dibahas secara komprehensif implementasi algoritma PID untuk wall-following pada robot di Webots, mulai dari konsep, pemrograman, tuning, hingga analisis performa. PID controller digunakan untuk menjaga jarak robot terhadap dinding pada nilai setpoint yang diinginkan dengan menghasilkan pergerakan yang halus, responsif, dan minim error steady-state.

### Konsep dan Prinsip Kerja PID pada Wall-Following

PID controller bekerja dengan menghitung error antara jarak sensor ke dinding dan setpoint (jarak ideal). Sinyal kendali yang dihasilkan merupakan kombinasi dari tiga komponen:

- Proportional (P): Koreksi berdasarkan error saat ini.
- Integral (I): Koreksi akumulasi error masa lalu untuk menghilangkan error steady-state.
- Derivative (D): Koreksi berdasarkan perubahan error untuk meredam osilasi dan mempercepat respons.

Output PID digunakan untuk mengatur kecepatan relatif roda kiri dan kanan sehingga robot tetap sejajar dan pada jarak konstan dari dinding.

### Struktur Dasar Algoritma PID Wall-Following

1. Baca nilai sensor jarak (misal sensor kiri untuk left wall-following)
2. Hitung error:  
   $\text{error} = \text{setpoint} - \text{nilai sensor}$
3. Update integral error:  
   $\text{integral} += \text{error}$
4. Hitung derivative error:  
   $\text{derivative} = \text{error} - \text{error sebelumnya}$
5. Hitung output PID:  
   $\text{output} = K_p \times \text{error} + K_i \times \text{integral} + K_d \times \text{derivative}$
6. Atur kecepatan motor:
   - Roda kiri: $\text{base} - \text{output}$
   - Roda kanan: $\text{base} + \text{output}$

### Contoh Kode PID Controller di Webots

```python
# Parameter PID
Kp = 0.8
Ki = 0.001
Kd = 0.3
setpoint = 600  # Jarak ideal dari dinding (misal 600 satuan sensor)
integral = 0
last_error = 0

def pid_control(sensor_value):
    global integral, last_error
    error = setpoint - sensor_value
    integral += error
    derivative = error - last_error
    last_error = error
    output = Kp * error + Ki * integral + Kd * derivative
    return output

BASE_SPEED = 3.0

while robot.step(TIME_STEP) != -1:
    sensor_values = read_sensors()
    left_sensor = sensor_values[1]  # Misal sensor kiri untuk left wall-following

    pid_output = pid_control(left_sensor)
    left_speed = BASE_SPEED - pid_output
    right_speed = BASE_SPEED + pid_output

    set_speed(left_speed, right_speed)
```

Penjelasan kode:

- Setpoint diatur sesuai jarak ideal yang ingin dipertahankan dari dinding.
- Fungsi `pid_control` menghitung output PID berdasarkan error, integral, dan derivative.
- Output PID digunakan untuk menyeimbangkan kecepatan roda kiri dan kanan.
- Robot akan bergerak lurus jika error nol, berbelok jika error positif/negatif.

### Tuning Parameter PID

- Tuning dapat dilakukan secara manual (trial and error) atau otomatis (misal dengan PSO, GA, Bat Algorithm).
- Nilai parameter optimal sangat bergantung pada karakteristik robot, sensor, dan lingkungan.
- Parameter tuning yang baik menghasilkan error rata-rata sangat kecil (misal MAE < 2 cm).

Analisis Performa PID Controller:

- Respons lebih halus dan stabil dibandingkan bang-bang controller. Robot mampu mengikuti dinding dengan deviasi kecil dan minim osilasi.
- Error steady-state sangat kecil jika tuning tepat, bahkan pada lintasan dengan banyak belokan atau permukaan tidak rata.
- Waktu tempuh lebih cepat karena robot tidak perlu sering memperbaiki posisi secara ekstrem.
- Robust terhadap gangguan dan perubahan lingkungan jika parameter PID dioptimalkan dengan baik.

Contoh hasil pengujian:

- Nilai MAE (Mean Absolute Error) < 2 cm pada lintasan lurus dan berbelok[1].
- Waktu puncak PID lebih cepat (misal 2.24 detik) dibandingkan kontrol fuzzy (3.71 detik), menunjukkan respons yang lebih cepat.
- Error rata-rata PID lebih kecil dibandingkan bang-bang controller dan lebih mudah dikontrol pada lintasan kompleks.

Catatan Praktis:

- Sampling time (interval pembacaan sensor dan update PID) harus konsisten, misal 100â€“300 ms[1].
- Filter sederhana seperti moving average dapat digunakan untuk mengurangi noise sensor sebelum masuk ke PID.
- Pada tikungan tajam, override mode atau switching ke strategi lain (misal bang-bang) bisa digunakan untuk menghindari stuck.

Implementasi PID controller untuk wall-following di Webots menghasilkan pergerakan robot yang lebih presisi, halus, dan efisien dibandingkan metode bang-bang. Dengan tuning parameter yang tepat, PID mampu menjaga jarak robot terhadap dinding secara konsisten dan responsif, bahkan pada lintasan dengan banyak belokan atau permukaan tidak rata.

